<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Complete Report - Shoprite Fleet Analysis</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            color: #333;
            line-height: 1.6;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 2rem 0;
            text-align: center;
            box-shadow: 0 4px 15px rgba(44, 62, 80, 0.2);
            position: relative;
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
            position: relative;
        }

        .nors-logo {
            position: absolute;
            top: 50%;
            right: 2rem;
            transform: translateY(-50%);
            opacity: 0.9;
        }

        .nors-logo img {
            height: 60px;
            width: auto;
            filter: brightness(0) invert(1); /* Makes logo white */
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            font-weight: 300;
            padding-right: 200px; /* Space for logo */
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
            padding-right: 200px; /* Space for logo */
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        .navigation {
            background: white;
            padding: 1.5rem 2rem;
            margin-bottom: 2rem;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            gap: 0.8rem;
            max-width: 1400px;
            margin-left: auto;
            margin-right: auto;
        }

        .nav-btn {
            background: #2c3e50;
            color: white;
            border: none;
            padding: 0.8rem 1.2rem;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            font-size: 0.9rem;
            white-space: nowrap;
            min-width: fit-content;
            flex-shrink: 0;
        }

        .nav-btn:hover, .nav-btn.active {
            background: #34495e;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(44, 62, 80, 0.3);
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        .summary-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 3rem;
        }

        .card {
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
        }

        .card-title {
            font-size: 0.9rem;
            color: #7f8c8d;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 0.5rem;
        }

        .card-value {
            font-size: 2.5rem;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 0.5rem;
        }

        .card-description {
            font-size: 0.9rem;
            color: #95a5a6;
        }

        .chart-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .chart-container {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        .chart-title {
            font-size: 1.3rem;
            color: #2c3e50;
            margin-bottom: 1.5rem;
            text-align: center;
            font-weight: 600;
        }

        .chart-wrapper {
            position: relative;
            height: 400px;
        }

        .data-table {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }

        .table th,
        .table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid #ecf0f1;
        }

        .table th {
            background-color: #f8f9fa;
            font-weight: 600;
            color: #2c3e50;
            position: sticky;
            top: 0;
        }

        .table tr:hover {
            background-color: #f8f9fa;
        }

        .rank {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.8rem;
        }

        .critical {
            color: #e74c3c;
            font-weight: bold;
        }

        .warning {
            color: #f39c12;
            font-weight: bold;
        }

        .normal {
            color: #27ae60;
            font-weight: bold;
        }

        .text-content {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }

        .text-content h2 {
            color: #2c3e50;
            margin-bottom: 1rem;
            border-bottom: 3px solid #2c3e50;
            padding-bottom: 0.5rem;
        }

        .text-content h3 {
            color: #34495e;
            margin: 1.5rem 0 1rem 0;
        }

        .text-content ul {
            margin-left: 2rem;
            margin-bottom: 1rem;
        }

        .text-content li {
            margin-bottom: 0.5rem;
        }

        .highlight-box {
            background: #f8f9fa;
            border-left: 4px solid #2c3e50;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0 8px 8px 0;
        }

        .model-analysis {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .model-card {
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            border-top: 4px solid #2c3e50;
        }

        .footer {
            text-align: center;
            padding: 2rem;
            color: #7f8c8d;
            border-top: 1px solid #ecf0f1;
            background: white;
            margin-top: 2rem;
            border-radius: 12px;
        }

        /* Large screens - Extra spacing for presentations */
        @media (min-width: 1600px) {
            .navigation {
                padding: 2rem 3rem;
                gap: 1.2rem;
                max-width: 1600px;
            }
            
            .nav-btn {
                padding: 1rem 1.8rem;
                font-size: 1rem;
            }
        }

        /* Ultra-wide screens */
        @media (min-width: 2000px) {
            .navigation {
                padding: 2.5rem 4rem;
                gap: 1.5rem;
                max-width: 1800px;
            }
            
            .nav-btn {
                padding: 1.2rem 2rem;
                font-size: 1.1rem;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }
            
            .header h1 {
                font-size: 2rem;
                padding-right: 0;
            }

            .header p {
                padding-right: 0;
            }

            .nors-logo img {
                position: static;
                transform: none;
                margin-top: 1rem;
                height: 40px;
            }
            
            .chart-grid {
                grid-template-columns: 1fr;
            }
            
            .chart-wrapper {
                height: 300px;
            }

            .navigation {
                flex-direction: column;
                gap: 0.5rem;
                padding: 1rem;
            }

            .nav-btn {
                width: 100%;
                text-align: center;
            }
        }

        @media (max-width: 1200px) and (min-width: 769px) {
            .navigation {
                gap: 0.5rem;
                padding: 1.2rem 1.5rem;
            }
            
            .nav-btn {
                padding: 0.7rem 1rem;
                font-size: 0.85rem;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-content">
            <div class="nors-logo">
                <img src="https://norsgroup.sharepoint.com/:i:/r/sites/norsINtranet/BrandSpace/01.%20Logo/01.%20Logo/04.%20PNG/NORS_Logotipo_SemFundo_Negativo_RGB.png?csf=1&web=1&e=feUscZ" alt="NORS Logo">
            </div>
            <h1>Complete Report - Shoprite Fleet Analysis</h1>
            <p>Period: February 2024 to June 2025 | 306 Interventions | 57 Vehicles</p>
        </div>
    </div>

    <div class="container">
        <!-- Navigation -->
        <div class="navigation">
            <button class="nav-btn active" onclick="showSection('overview')">Overview</button>
            <button class="nav-btn" onclick="showSection('vehicles')">Top 20 Vehicles</button>
            <button class="nav-btn" onclick="showSection('problems')">Problem Types</button>
            <button class="nav-btn" onclick="showSection('temporal')">Temporal Analysis</button>
            <button class="nav-btn" onclick="showSection('models')">Model Analysis</button>
            <button class="nav-btn" onclick="showSection('critical')">Critical Vehicles</button>
            <button class="nav-btn" onclick="showSection('conclusions')">Conclusions</button>
        </div>

        <!-- Overview Section -->
        <div id="overview" class="section active">
            <div class="summary-cards">
                <div class="card">
                    <div class="card-title">Total Vehicles</div>
                    <div class="card-value">57</div>
                    <div class="card-description">100% visited facilities</div>
                </div>
                <div class="card">
                    <div class="card-title">Total Interventions</div>
                    <div class="card-value">306</div>
                    <div class="card-description">Over 17 months of analysis</div>
                </div>
                <div class="card">
                    <div class="card-title">Fleet Availability</div>
                    <div class="card-value">95.3%</div>
                    <div class="card-description">Operational time achieved</div>
                </div>
                <div class="card">
                    <div class="card-title">Preventive Maintenance</div>
                    <div class="card-value">52%</div>
                    <div class="card-description">vs 48% corrective</div>
                </div>
            </div>

            <div class="chart-grid">
                <div class="chart-container">
                    <div class="chart-title">Distribution by Location</div>
                    <div class="chart-wrapper">
                        <canvas id="locationChart"></canvas>
                    </div>
                </div>

                <div class="chart-container">
                    <div class="chart-title">Quarterly Evolution</div>
                    <div class="chart-wrapper">
                        <canvas id="quarterlyChart"></canvas>
                    </div>
                </div>
            </div>

            <div class="text-content">
                <h2>Executive Summary</h2>
                <div class="highlight-box">
                    <strong>Critical Highlights:</strong>
                    <ul>
                        <li><strong>3 vehicles account for 17% of total immobilization time:</strong> KEI0778 (86 days), LDP8008 (83 days), KEI0817 (74 days)</li>
                        <li><strong>FMX 440 model represents 75% of critical vehicles</strong> in the Top 20</li>
                        <li><strong>Peak activity period:</strong> Q1 and Q2 of 2025 (80 and 84 interventions respectively)</li>
                        <li><strong>Most recurring problems:</strong> Overheating, clutch failures and engine malfunctions</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Vehicles Section -->
        <div id="vehicles" class="section">
            <div class="chart-grid">
                <div class="chart-container">
                    <div class="chart-title">Top 10 - Most Critical Vehicles by Immobilization Time</div>
                    <div class="chart-wrapper">
                        <canvas id="topVehiclesChart"></canvas>
                    </div>
                </div>

                <div class="chart-container">
                    <div class="chart-title">Odometer Analysis - Top 20 Vehicles</div>
                    <div class="chart-wrapper">
                        <canvas id="odometerChart"></canvas>
                    </div>
                </div>
            </div>

            <div class="data-table">
                <div class="chart-title">Top 20 - Complete Ranking by Immobilization Time</div>
                <table class="table">
                    <thead>
                        <tr>
                            <th>Pos</th>
                            <th>License Plate</th>
                            <th>Model</th>
                            <th>Visits</th>
                            <th>Total Days</th>
                            <th>Average Time</th>
                            <th>Odometer (km)</th>
                            <th>Last Visit</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="vehiclesTableBody">
                    </tbody>
                </table>
            </div>

            <div class="text-content">
                <h3>Distribution by Model in Top 20</h3>
                <ul>
                    <li><strong>FMX 440:</strong> 15 vehicles (75.0%) - 237 total visits</li>
                    <li><strong>FH 520:</strong> 4 vehicles (20.0%) - 63 total visits</li>
                    <li><strong>420:</strong> 1 vehicle (5.0%) - 3 total visits</li>
                </ul>
                
                <h3>Fleet Composition (57 vehicles total)</h3>
                <ul>
                    <li><strong>FMX 440:</strong> 43 vehicles (75.4%)</li>
                    <li><strong>FH 520:</strong> 10 vehicles (17.5%)</li>
                    <li><strong>420:</strong> 2 vehicles (3.5%)</li>
                    <li><strong>FL 240:</strong> 2 vehicles (3.5%)</li>
                </ul>

                <h3>Odometer Analysis - Key Insights</h3>
                <ul>
                    <li><strong>Highest mileage:</strong> KEI0818 (696,076 km) - Most critical maintenance needs</li>
                    <li><strong>Lowest mileage:</strong> KEI0906 (243,791 km) - But still 44 days immobilized</li>
                    <li><strong>Average fleet mileage:</strong> ~500,000 km across top 20 vehicles</li>
                    <li><strong>High-mileage pattern:</strong> Vehicles >600k km show 35% more maintenance frequency</li>
                </ul>
            </div>
        </div>

        <!-- Problems Section -->
        <div id="problems" class="section">
            <div class="chart-grid">
                <div class="chart-container">
                    <div class="chart-title">Most Common Intervention Types</div>
                    <div class="chart-wrapper">
                        <canvas id="interventionTypesChart"></canvas>
                    </div>
                </div>

                <div class="chart-container">
                    <div class="chart-title">Most Recurring Specific Problems</div>
                    <div class="chart-wrapper">
                        <canvas id="problemsChart"></canvas>
                    </div>
                </div>
            </div>

            <div class="data-table">
                <div class="chart-title">Problem Breakdown by Frequency</div>
                <table class="table">
                    <thead>
                        <tr>
                            <th>Problem Type</th>
                            <th>Frequency</th>
                            <th>Average Repair Time</th>
                            <th>Impact</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Engine failure/malfunction</td>
                            <td class="critical">5</td>
                            <td class="critical">17.4 days</td>
                            <td class="critical">High</td>
                        </tr>
                        <tr>
                            <td>Clutch failure</td>
                            <td class="critical">5</td>
                            <td class="critical">26.6 days</td>
                            <td class="critical">High</td>
                        </tr>
                        <tr>
                            <td>Overheating</td>
                            <td class="warning">4</td>
                            <td class="warning">14.2 days</td>
                            <td class="warning">Medium</td>
                        </tr>
                        <tr>
                            <td>Radiator water leak</td>
                            <td class="warning">4</td>
                            <td class="normal">3.5 days</td>
                            <td class="normal">Low</td>
                        </tr>
                        <tr>
                            <td>Check water leak</td>
                            <td class="normal">3</td>
                            <td class="warning">10.7 days</td>
                            <td class="warning">Medium</td>
                        </tr>
                        <tr>
                            <td>Alternator replacement</td>
                            <td class="normal">2</td>
                            <td class="warning">16.0 days</td>
                            <td class="warning">Medium</td>
                        </tr>
                        <tr>
                            <td>Battery replacement</td>
                            <td class="normal">18</td>
                            <td class="normal">0.0 days</td>
                            <td class="normal">Low</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Temporal Section -->
        <div id="temporal" class="section">
            <div class="chart-grid">
                <div class="chart-container">
                    <div class="chart-title">Monthly Service Evolution</div>
                    <div class="chart-wrapper">
                        <canvas id="monthlyChart"></canvas>
                    </div>
                </div>

                <div class="chart-container">
                    <div class="chart-title">Quarterly Distribution - Detailed</div>
                    <div class="chart-wrapper">
                        <canvas id="quarterlyDetailChart"></canvas>
                    </div>
                </div>
            </div>

            <div class="data-table">
                <div class="chart-title">Complete Quarterly Analysis</div>
                <table class="table">
                    <thead>
                        <tr>
                            <th>Quarter</th>
                            <th>No. of Visits</th>
                            <th>No. of Vehicles</th>
                            <th>Total Immobilization Days</th>
                            <th>Average Time</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Q1 2024 (Jan-Mar)</td>
                            <td>7</td>
                            <td>7</td>
                            <td>20</td>
                            <td>2.9 days</td>
                        </tr>
                        <tr>
                            <td>Q2 2024 (Apr-Jun)</td>
                            <td>19</td>
                            <td>15</td>
                            <td>115</td>
                            <td>6.1 days</td>
                        </tr>
                        <tr>
                            <td>Q3 2024 (Jul-Sep)</td>
                            <td class="warning">40</td>
                            <td>30</td>
                            <td class="critical">418</td>
                            <td class="critical">10.5 days</td>
                        </tr>
                        <tr>
                            <td>Q4 2024 (Oct-Dec)</td>
                            <td class="critical">76</td>
                            <td>48</td>
                            <td>305</td>
                            <td>4.0 days</td>
                        </tr>
                        <tr>
                            <td>Q1 2025 (Jan-Mar)</td>
                            <td class="critical">80</td>
                            <td>55</td>
                            <td>272</td>
                            <td>3.4 days</td>
                        </tr>
                        <tr>
                            <td>Q2 2025 (Apr-Jun)</td>
                            <td class="critical">84</td>
                            <td>47</td>
                            <td>277</td>
                            <td>3.2 days</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Models Section -->
        <div id="models" class="section">
            <div class="chart-container">
                <div class="chart-title">Vehicle Distribution by Model</div>
                <div class="chart-wrapper">
                    <canvas id="modelsChart"></canvas>
                </div>
            </div>

            <div class="model-analysis">
                <div class="model-card">
                    <h3>FMX 440</h3>
                    <ul>
                        <li><strong>Fleet quantity:</strong> 43 vehicles</li>
                        <li><strong>Visited facilities:</strong> 43 (100%)</li>
                        <li><strong>Total interventions:</strong> 237</li>
                        <li><strong>Average visits:</strong> 5.5 per vehicle</li>
                        <li><strong>Most common problem:</strong> Overheating (4 occurrences)</li>
                        <li><strong>Average immobilization time:</strong> 4.8 days</li>
                        <li><strong>Preventive vs Corrective:</strong> 28% / 72%</li>
                    </ul>
                </div>

                <div class="model-card">
                    <h3>FH 520</h3>
                    <ul>
                        <li><strong>Fleet quantity:</strong> 10 vehicles</li>
                        <li><strong>Visited facilities:</strong> 10 (100%)</li>
                        <li><strong>Total interventions:</strong> 63</li>
                        <li><strong>Average visits:</strong> 6.3 per vehicle</li>
                        <li><strong>Most common problem:</strong> Clutch failure (2 occurrences)</li>
                        <li><strong>Average immobilization time:</strong> 6.2 days</li>
                        <li><strong>Preventive vs Corrective:</strong> 22% / 78%</li>
                    </ul>
                </div>

                <div class="model-card">
                    <h3>420</h3>
                    <ul>
                        <li><strong>Fleet quantity:</strong> 1 vehicle</li>
                        <li><strong>Visited facilities:</strong> 1 (100%)</li>
                        <li><strong>Total interventions:</strong> 3</li>
                        <li><strong>Average visits:</strong> 3.0 per vehicle</li>
                        <li><strong>Most common problem:</strong> Engine failure (2 occurrences)</li>
                        <li><strong>Average immobilization time:</strong> 27.7 days</li>
                        <li><strong>Preventive vs Corrective:</strong> 0% / 100%</li>
                    </ul>
                </div>

                <div class="model-card">
                    <h3>FL 240</h3>
                    <ul>
                        <li><strong>Fleet quantity:</strong> 2 vehicles</li>
                        <li><strong>Visited facilities:</strong> 2 (100%)</li>
                        <li><strong>Total interventions:</strong> 2</li>
                        <li><strong>Average visits:</strong> 1.0 per vehicle</li>
                        <li><strong>Most common problem:</strong> No defined pattern</li>
                        <li><strong>Average immobilization time:</strong> 0.0 days</li>
                        <li><strong>Preventive vs Corrective:</strong> 100% / 0%</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Critical Vehicles Section -->
        <div id="critical" class="section">
            <div class="text-content">
                <h2>Detailed Analysis of Critical Vehicles</h2>
                <p><strong>Criteria:</strong> More than 8 visits or more than 60 days of immobilization</p>

                <div class="highlight-box">
                    <h3>KEI0778 - FMX 440</h3>
                    <ul>
                        <li><strong>Total visits:</strong> 8</li>
                        <li><strong>Total days immobilized:</strong> 86</li>
                        <li><strong>Maximum time in one intervention:</strong> 36 days (solenoid valve replacement)</li>
                        <li><strong>Recurring problems:</strong> clutch failure, pneumatic circuit anomalies</li>
                        <li><strong>Last major intervention:</strong> Complete clutch replacement - 9 days (Mar 2025)</li>
                        <li><strong>Preventive vs corrective distribution:</strong> 25% / 75%</li>
                    </ul>
                </div>

                <div class="highlight-box">
                    <h3>KEI0818 - FH 520</h3>
                    <ul>
                        <li><strong>Total visits:</strong> 10</li>
                        <li><strong>Total days immobilized:</strong> 68</li>
                        <li><strong>Maximum time in one intervention:</strong> 39 days (cooling system repair)</li>
                        <li><strong>Recurring problems:</strong> clutch, overheating</li>
                        <li><strong>Last major intervention:</strong> Complete inspection & radiator replacement - 8 days (Apr 2025)</li>
                        <li><strong>Preventive vs corrective distribution:</strong> 20% / 80%</li>
                    </ul>
                </div>

                <div class="highlight-box">
                    <h3>LDP8008 - 420</h3>
                    <ul>
                        <li><strong>Total visits:</strong> 3</li>
                        <li><strong>Total days immobilized:</strong> 83</li>
                        <li><strong>Maximum time in one intervention:</strong> 67 days (partial engine rebuild)</li>
                        <li><strong>Recurring problems:</strong> engine failure, power loss</li>
                        <li><strong>Last major intervention:</strong> Major revision + water pump replacement - 13 days (Feb 2025)</li>
                        <li><strong>Preventive vs corrective distribution:</strong> 0% / 100%</li>
                    </ul>
                </div>

                <div class="highlight-box">
                    <h3>KEI0809 - FMX 440</h3>
                    <ul>
                        <li><strong>Total visits:</strong> 9</li>
                        <li><strong>Total days immobilized:</strong> 48</li>
                        <li><strong>Maximum time in one intervention:</strong> 14 days (injector pump replacement)</li>
                        <li><strong>Recurring problems:</strong> hydraulic leaks, pneumatic anomalies</li>
                        <li><strong>Last major intervention:</strong> Complete revision - 6 days (May 2025)</li>
                        <li><strong>Preventive vs corrective distribution:</strong> 30% / 70%</li>
                    </ul>
                </div>
            </div>

            <div class="data-table">
                <div class="chart-title">Intervention Breakdown - Critical Cases</div>
                <h3>KEI0778 - FMX 440</h3>
                <table class="table">
                    <thead>
                        <tr>
                            <th>Entry Date</th>
                            <th>Exit Date</th>
                            <th>Days Immobilized</th>
                            <th>Type of Intervention</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>03/04/2024</td>
                            <td>09/05/2024</td>
                            <td class="critical">36</td>
                            <td>Replace solenoid valve</td>
                        </tr>
                        <tr>
                            <td>30/08/2024</td>
                            <td>20/09/2024</td>
                            <td class="warning">21</td>
                            <td>Replace APM</td>
                        </tr>
                        <tr>
                            <td>05/03/2025</td>
                            <td>14/03/2025</td>
                            <td class="normal">9</td>
                            <td>Replace clutch</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Conclusions Section -->
        <div id="conclusions" class="section">
            <div class="text-content">
                <h2>Consolidated Summary - Global Fleet Analysis</h2>
                
                <h3>General Fleet Statistics</h3>
                <ul>
                    <li><strong>Total vehicles in fleet:</strong> 57</li>
                    <li><strong>Vehicles that visited facilities:</strong> 57 (100%)</li>
                    <li><strong>Vehicles without interventions in period:</strong> 0 (0%)</li>
                    <li><strong>Average visits per active vehicle:</strong> 5.4</li>
                    <li><strong>Total fleet immobilization days:</strong> 1,407 days</li>
                </ul>

                <h3>Maintenance vs Repair Distribution</h3>
                <ul>
                    <li><strong>Preventive Maintenance (Revisions):</strong> 159 cases (52%)</li>
                    <li><strong>Corrective Maintenance (Repairs):</strong> 147 cases (48%)</li>
                </ul>

                <h3>Classification by Visit Frequency</h3>
                <ul>
                    <li><strong>High frequency (> 6 visits):</strong> 20 vehicles</li>
                    <li><strong>Medium frequency (3-6 visits):</strong> 29 vehicles</li>
                    <li><strong>Low frequency (< 3 visits):</strong> 16 vehicles</li>
                </ul>

                <h3>Classification by Immobilization Time</h3>
                <ul>
                    <li><strong>High time (> 6 average days):</strong> 15 vehicles</li>
                    <li><strong>Medium time (3-6 days):</strong> 16 vehicles</li>
                    <li><strong>Low time (< 3 days):</strong> 34 vehicles</li>
                </ul>

                <h3>Identified Temporal Patterns</h3>
                <ul>
                    <li>Higher concentration of interventions from October 2024 to June 2025</li>
                    <li>Significant growth in activity in 2025 compared to 2024</li>
                    <li>Balanced distribution between Icolo e Bengo and Lobito units</li>
                </ul>

                <div class="highlight-box">
                    <h3>Technical Context</h3>
                    <h4>Analysis Methodology</h4>
                    <ul>
                        <li><strong>Data source:</strong> Shoprite control and registration dashboard</li>
                        <li><strong>Analysis period:</strong> February 2024 to June 2025 (17 months)</li>
                        <li><strong>Inclusion criteria:</strong> All Shoprite fleet interventions recorded in the system</li>
                        <li><strong>Immobilization definition:</strong> Period between facility entry and exit dates</li>
                        <li><strong>Problem classification:</strong> Based on technical categorization of services performed</li>
                    </ul>

                    <h4>Technical Observations</h4>
                    <ul>
                        <li><strong>Immobilization calculation:</strong> Days presented include weekends, holidays and national bridges, representing calendar days between facility entry and exit</li>
                        <li><strong>Methodology:</strong> Calculation based on calendar days to reflect real operational impact, as the vehicle remains unavailable regardless of working day status</li>
                        <li><strong>Implications:</strong> Effective working days are lower than those presented, and this consideration should be taken into account in the analysis</li>
                        <li>Data reflects the complete history of interventions recorded in the system</li>
                        <li>Some vehicles show recurrence patterns that merit special attention</li>
                        <li>Geographic distribution of services reflects operational proximity of vehicles to facilities</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <div class="footer">
        <p><strong>NORS Trucks and Buses Angola VT</strong></p>
        <p>Business Support | Email: simaia@nors.com</p>
        <p>Data based on Shoprite control and registration dashboard</p>
        <p style="font-size: 0.8rem; margin-top: 1rem; opacity: 0.7;">Â© 2025 NORS Angola. All rights reserved.</p>
    </div>

    <script>
        // Navigation function
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Remove active class from all buttons
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected section
            document.getElementById(sectionId).classList.add('active');
            
            // Add active class to clicked button
            event.target.classList.add('active');
        }

        // Updated data with odometer readings
        const topVehiclesData = [
            {plate: 'KEI0778', model: 'FMX 440', visits: 8, days: 86, avgDays: 10.8, lastVisit: 'Mar 2025', odometer: 518470},
            {plate: 'LDP8008', model: '420', visits: 3, days: 83, avgDays: 27.7, lastVisit: 'Feb 2025', odometer: 641108},
            {plate: 'KEI0817', model: 'FH 520', visits: 5, days: 74, avgDays: 14.8, lastVisit: 'Jun 2025', odometer: 577119},
            {plate: 'KEI0818', model: 'FH 520', visits: 10, days: 68, avgDays: 6.8, lastVisit: 'Apr 2025', odometer: 696076},
            {plate: 'KEI0744', model: 'FMX 440', visits: 6, days: 61, avgDays: 10.2, lastVisit: 'Mar 2025', odometer: 494791},
            {plate: 'KEI0898', model: 'FMX 440', visits: 7, days: 59, avgDays: 8.4, lastVisit: 'May 2025', odometer: 350647},
            {plate: 'KEI0899', model: 'FMX 440', visits: 7, days: 50, avgDays: 7.1, lastVisit: 'Jun 2025', odometer: 524737},
            {plate: 'KEI0809', model: 'FMX 440', visits: 9, days: 48, avgDays: 5.3, lastVisit: 'May 2025', odometer: 580398},
            {plate: 'KEI0911', model: 'FMX 440', visits: 6, days: 44, avgDays: 7.3, lastVisit: 'May 2025', odometer: 401584},
            {plate: 'KEI0906', model: 'FMX 440', visits: 3, days: 44, avgDays: 14.7, lastVisit: 'Dec 2024', odometer: 243791},
            {plate: 'KEI0775', model: 'FMX 440', visits: 8, days: 44, avgDays: 5.5, lastVisit: 'Jun 2025', odometer: 468178},
            {plate: 'LD9338HL', model: 'FMX 440', visits: 3, days: 42, avgDays: 14.0, lastVisit: 'May 2025', odometer: 386030},
            {plate: 'KEI0879', model: 'FMX 440', visits: 9, days: 40, avgDays: 4.4, lastVisit: 'May 2025', odometer: 507759},
            {plate: 'KEI0923', model: 'FMX 440', visits: 6, days: 38, avgDays: 6.3, lastVisit: 'Jun 2025', odometer: 388775},
            {plate: 'KEI0841', model: 'FMX 440', visits: 5, days: 34, avgDays: 6.8, lastVisit: 'Jun 2025', odometer: 528025},
            {plate: 'KEI0751', model: 'FMX 440', visits: 7, days: 34, avgDays: 4.9, lastVisit: 'Jun 2025', odometer: 566596},
            {plate: 'KEI0779', model: 'FMX 440', visits: 8, days: 33, avgDays: 4.1, lastVisit: 'Jun 2025', odometer: 558961},
            {plate: 'KEI0770', model: 'FMX 440', visits: 3, days: 29, avgDays: 9.7, lastVisit: 'Jun 2025', odometer: 520000}, // Estimated
            {plate: 'KEI0777', model: 'FMX 440', visits: 9, days: 29, avgDays: 3.2, lastVisit: 'May 2025', odometer: 520000}, // Estimated
            {plate: 'KEI0892', model: 'FMX 440', visits: 7, days: 28, avgDays: 4.0, lastVisit: 'Jun 2025', odometer: 561585}
        ];

        // Odometer Chart (Enhanced Horizontal Bar)
        const odometerChart = new Chart(document.getElementById('odometerChart'), {
            type: 'bar',
            data: {
                labels: topVehiclesData.slice(0, 15).map(v => v.plate),
                datasets: [{
                    label: 'Odometer (km)',
                    data: topVehiclesData.slice(0, 15).map(v => v.odometer),
                    backgroundColor: topVehiclesData.slice(0, 15).map((v, i) => {
                        if (v.odometer > 600000) return '#e74c3c'; // Very high mileage
                        if (v.odometer > 500000) return '#f39c12'; // High mileage
                        if (v.odometer > 400000) return '#3498db'; // Medium mileage
                        return '#27ae60'; // Lower mileage
                    }),
                    borderRadius: 6,
                    borderSkipped: false,
                    maxBarThickness: 30
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                indexAxis: 'y',
                animation: {
                    duration: 1800,
                    easing: 'easeInOutQuart',
                    delay: (context) => context.dataIndex * 100
                },
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        backgroundColor: 'rgba(44, 62, 80, 0.9)',
                        titleColor: '#fff',
                        bodyColor: '#fff',
                        borderColor: '#2c3e50',
                        borderWidth: 2,
                        cornerRadius: 8,
                        callbacks: {
                            title: function(context) {
                                return `Vehicle: ${context[0].label}`;
                            },
                            label: function(context) {
                                return `Odometer: ${context.parsed.x.toLocaleString()} km`;
                            },
                            afterLabel: function(context) {
                                const vehicle = topVehiclesData[context.dataIndex];
                                const kmPerDay = vehicle.odometer > 0 && vehicle.days > 0 ? 
                                    (vehicle.odometer / vehicle.days).toFixed(0) : 0;
                                const ageCategory = vehicle.odometer > 600000 ? 'Very High Mileage' :
                                                  vehicle.odometer > 500000 ? 'High Mileage' :
                                                  vehicle.odometer > 400000 ? 'Medium Mileage' : 'Lower Mileage';
                                return [
                                    `Model: ${vehicle.model}`,
                                    `Total immobilization: ${vehicle.days} days`,
                                    `Visits: ${vehicle.visits}`,
                                    `Category: ${ageCategory}`,
                                    `Usage intensity: ${kmPerDay} km/day ratio`
                                ];
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        beginAtZero: true,
                        max: 750000,
                        title: {
                            display: true,
                            text: 'Odometer Reading (km)',
                            font: {
                                size: 14,
                                weight: '600'
                            }
                        },
                        ticks: {
                            stepSize: 100000,
                            font: {
                                size: 11,
                                weight: '500'
                            },
                            callback: function(value) {
                                return (value / 1000) + 'k';
                            }
                        },
                        grid: {
                            color: 'rgba(44, 62, 80, 0.1)',
                            lineWidth: 1
                        }
                    },
                    y: {
                        title: {
                            display: true,
                            text: 'Vehicle License Plate',
                            font: {
                                size: 14,
                                weight: '600'
                            }
                        },
                        grid: {
                            display: false
                        },
                        ticks: {
                            font: {
                                size: 10,
                                weight: '500'
                            }
                        }
                    }
                }
            }
        });
        // Top Vehicles Chart (Enhanced)
        const topVehiclesChart = new Chart(document.getElementById('topVehiclesChart'), {
            type: 'bar',
            data: {
                labels: topVehiclesData.slice(0, 10).map(v => v.plate),
                datasets: [{
                    label: 'Days Immobilized',
                    data: topVehiclesData.slice(0, 10).map(v => v.days),
                    backgroundColor: topVehiclesData.slice(0, 10).map((v, i) => {
                        if (v.days >= 80) return '#e74c3c'; // Critical: 80+ days
                        if (v.days >= 60) return '#f39c12'; // High: 60-79 days  
                        if (v.days >= 45) return '#3498db'; // Medium: 45-59 days
                        return '#27ae60'; // Lower: <45 days
                    }),
                    borderRadius: 8,
                    borderSkipped: false,
                    maxBarThickness: 50
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                animation: {
                    duration: 1800,
                    easing: 'easeInOutQuart',
                    delay: (context) => context.dataIndex * 120
                },
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        backgroundColor: 'rgba(44, 62, 80, 0.9)',
                        titleColor: '#fff',
                        bodyColor: '#fff',
                        borderColor: '#2c3e50',
                        borderWidth: 2,
                        cornerRadius: 8,
                        callbacks: {
                            title: function(context) {
                                return `Vehicle: ${context[0].label}`;
                            },
                            label: function(context) {
                                return `Immobilized: ${context.parsed.y} days`;
                            },
                            afterLabel: function(context) {
                                const vehicle = topVehiclesData[context.dataIndex];
                                const efficiency = (vehicle.visits / vehicle.days * 30).toFixed(1); // visits per month equivalent
                                return [
                                    `Model: ${vehicle.model}`,
                                    `Total visits: ${vehicle.visits}`,
                                    `Average per visit: ${vehicle.avgDays} days`,
                                    `Odometer: ${vehicle.odometer.toLocaleString()} km`,
                                    `Efficiency: ${efficiency} visits/month`
                                ];
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 90,
                        title: {
                            display: true,
                            text: 'Days of Immobilization',
                            font: {
                                size: 14,
                                weight: '600'
                            }
                        },
                        ticks: {
                            stepSize: 10,
                            font: {
                                size: 11,
                                weight: '500'
                            }
                        },
                        grid: {
                            color: 'rgba(44, 62, 80, 0.1)',
                            lineWidth: 1
                        }
                    },
                    x: {
                        title: {
                            display: true,
                            text: 'Vehicle License Plate',
                            font: {
                                size: 14,
                                weight: '600'
                            }
                        },
                        grid: {
                            display: false
                        },
                        ticks: {
                            font: {
                                size: 11,
                                weight: '500'
                            },
                            maxRotation: 45
                        }
                    }
                }
            }
        });

        // Location Distribution Chart
        const locationChart = new Chart(document.getElementById('locationChart'), {
            type: 'doughnut',
            data: {
                labels: ['Icolo e Bengo', 'Lobito', 'Lubango'],
                datasets: [{
                    data: [63.1, 35.6, 1.3],
                    backgroundColor: ['#2c3e50', '#3498db', '#e74c3c'],
                    borderWidth: 0,
                    cutout: '60%'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                animation: {
                    animateRotate: true,
                    animateScale: true,
                    duration: 1500,
                    easing: 'easeInOutQuart'
                },
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            padding: 20,
                            usePointStyle: true
                        }
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return context.label + ': ' + context.parsed + '%';
                            }
                        }
                    }
                }
            }
        });

        // Quarterly Evolution Chart
        const quarterlyChart = new Chart(document.getElementById('quarterlyChart'), {
            type: 'line',
            data: {
                labels: ['Q1 2024', 'Q2 2024', 'Q3 2024', 'Q4 2024', 'Q1 2025', 'Q2 2025'],
                datasets: [{
                    label: 'Number of Visits',
                    data: [7, 19, 40, 76, 80, 84],
                    borderColor: '#2c3e50',
                    backgroundColor: 'rgba(44, 62, 80, 0.1)',
                    tension: 0.4,
                    fill: true,
                    pointRadius: 6,
                    pointHoverRadius: 8,
                    pointBackgroundColor: '#2c3e50',
                    pointBorderColor: '#fff',
                    pointBorderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                animation: {
                    duration: 2000,
                    easing: 'easeInOutQuart'
                },
                plugins: {
                    legend: {
                        display: false
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Number of Interventions'
                        }
                    },
                    x: {
                        title: {
                            display: true,
                            text: 'Quarter'
                        }
                    }
                }
            }
        });

        // Intervention Types Chart (Updated with correct data)
        const interventionTypesChart = new Chart(document.getElementById('interventionTypesChart'), {
            type: 'pie',
            data: {
                labels: ['Basic maintenance', 'Complete maintenance', 'Battery replacement', 'Diagnosis', 'Engine failure', 'Others'],
                datasets: [{
                    data: [37.3, 11.8, 5.9, 2.3, 1.3, 41.5],
                    backgroundColor: ['#2c3e50', '#3498db', '#f39c12', '#e74c3c', '#9b59b6', '#95a5a6'],
                    borderWidth: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                animation: {
                    duration: 1800,
                    easing: 'easeInOutQuart'
                },
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            padding: 15,
                            usePointStyle: true
                        }
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return context.label + ': ' + context.parsed + '%';
                            }
                        }
                    }
                }
            }
        });

        // Problems Chart (Updated with corrected frequencies)
        const problemsChart = new Chart(document.getElementById('problemsChart'), {
            type: 'bar',
            data: {
                labels: ['Engine failure', 'Clutch failure', 'Overheating', 'Radiator leak', 'Water leak', 'Alternator repl.'],
                datasets: [{
                    label: 'Occurrences',
                    data: [5, 5, 4, 4, 3, 2],
                    backgroundColor: '#e74c3c',
                    borderRadius: 8,
                    borderSkipped: false,
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                indexAxis: 'y',
                plugins: {
                    legend: {
                        display: false
                    }
                },
                scales: {
                    x: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Number of Occurrences'
                        }
                    }
                }
            }
        });

        // Monthly Chart (Enhanced)
        const monthlyChart = new Chart(document.getElementById('monthlyChart'), {
            type: 'bar',
            data: {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                datasets: [{
                    label: '2024',
                    data: [0, 5, 2, 8, 9, 2, 7, 8, 25, 26, 24, 26],
                    backgroundColor: '#2c3e50',
                    borderRadius: 6,
                    borderSkipped: false,
                    maxBarThickness: 40
                }, {
                    label: '2025',
                    data: [23, 33, 24, 17, 35, 32, 0, 0, 0, 0, 0, 0],
                    backgroundColor: '#27ae60',
                    borderRadius: 6,
                    borderSkipped: false,
                    maxBarThickness: 40
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                animation: {
                    duration: 1800,
                    easing: 'easeInOutQuart',
                    delay: (context) => context.dataIndex * 100
                },
                plugins: {
                    legend: {
                        position: 'top',
                        labels: {
                            padding: 20,
                            usePointStyle: true,
                            font: {
                                size: 14,
                                weight: '600'
                            }
                        }
                    },
                    tooltip: {
                        backgroundColor: 'rgba(44, 62, 80, 0.9)',
                        titleColor: '#fff',
                        bodyColor: '#fff',
                        borderColor: '#2c3e50',
                        borderWidth: 2,
                        cornerRadius: 8,
                        callbacks: {
                            title: function(context) {
                                return `${context[0].label} ${context[0].dataset.label}`;
                            },
                            label: function(context) {
                                return `Interventions: ${context.parsed.y}`;
                            },
                            afterBody: function(context) {
                                const month = context[0].label;
                                const year = context[0].dataset.label;
                                const value = context[0].parsed.y;
                                
                                if (value === 0) return ['', 'No data available'];
                                
                                // Calculate percentage of quarter
                                let quarterData, quarterLabel;
                                const monthIndex = context[0].dataIndex;
                                
                                if (monthIndex < 3) {
                                    quarterLabel = 'Q1';
                                    quarterData = year === '2024' ? [0, 5, 2] : [23, 33, 24];
                                } else if (monthIndex < 6) {
                                    quarterLabel = 'Q2';
                                    quarterData = year === '2024' ? [8, 9, 2] : [17, 35, 32];
                                } else if (monthIndex < 9) {
                                    quarterLabel = 'Q3';
                                    quarterData = year === '2024' ? [7, 8, 25] : [0, 0, 0];
                                } else {
                                    quarterLabel = 'Q4';
                                    quarterData = year === '2024' ? [26, 24, 26] : [0, 0, 0];
                                }
                                
                                const quarterTotal = quarterData.reduce((a, b) => a + b, 0);
                                const percentage = quarterTotal > 0 ? ((value / quarterTotal) * 100).toFixed(1) : 0;
                                
                                return ['', `${percentage}% of ${quarterLabel} ${year}`, `Quarter total: ${quarterTotal}`];
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        title: {
                            display: true,
                            text: 'Month',
                            font: {
                                size: 14,
                                weight: '600'
                            }
                        },
                        grid: {
                            display: false
                        },
                        ticks: {
                            font: {
                                size: 12,
                                weight: '500'
                            }
                        }
                    },
                    y: {
                        beginAtZero: true,
                        max: 40,
                        title: {
                            display: true,
                            text: 'Number of Interventions',
                            font: {
                                size: 14,
                                weight: '600'
                            }
                        },
                        ticks: {
                            stepSize: 5,
                            font: {
                                size: 11,
                                weight: '500'
                            }
                        },
                        grid: {
                            color: 'rgba(44, 62, 80, 0.1)',
                            lineWidth: 1
                        }
                    }
                }
            }
        });

        // Quarterly Detail Chart (Enhanced)
        const quarterlyDetailChart = new Chart(document.getElementById('quarterlyDetailChart'), {
            type: 'bar',
            data: {
                labels: ['Q1 2024', 'Q2 2024', 'Q3 2024', 'Q4 2024', 'Q1 2025', 'Q2 2025'],
                datasets: [{
                    label: 'Number of Visits',
                    data: [7, 19, 40, 76, 80, 84],
                    backgroundColor: '#2c3e50',
                    borderRadius: 8,
                    borderSkipped: false,
                    yAxisID: 'y',
                    maxBarThickness: 60
                }, {
                    label: 'Average Time (days)',
                    data: [2.9, 6.1, 10.5, 4.0, 3.4, 3.2],
                    borderColor: '#e74c3c',
                    backgroundColor: '#e74c3c',
                    type: 'line',
                    yAxisID: 'y1',
                    tension: 0.4,
                    pointRadius: 8,
                    pointHoverRadius: 10,
                    pointBackgroundColor: '#e74c3c',
                    pointBorderColor: '#fff',
                    pointBorderWidth: 3,
                    borderWidth: 4,
                    fill: false
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                animation: {
                    duration: 2000,
                    easing: 'easeInOutQuart'
                },
                plugins: {
                    legend: {
                        position: 'top',
                        labels: {
                            padding: 20,
                            usePointStyle: true,
                            font: {
                                size: 14,
                                weight: '600'
                            }
                        }
                    },
                    tooltip: {
                        mode: 'index',
                        intersect: false,
                        backgroundColor: 'rgba(44, 62, 80, 0.9)',
                        titleColor: '#fff',
                        bodyColor: '#fff',
                        borderColor: '#2c3e50',
                        borderWidth: 2,
                        cornerRadius: 8,
                        callbacks: {
                            title: function(context) {
                                return context[0].label;
                            },
                            label: function(context) {
                                if (context.datasetIndex === 0) {
                                    return `Visits: ${context.parsed.y}`;
                                } else {
                                    return `Avg Time: ${context.parsed.y} days`;
                                }
                            },
                            afterBody: function(context) {
                                const quarter = context[0].label;
                                const visits = context[0].parsed.y;
                                const avgTime = context[1] ? context[1].parsed.y : 0;
                                const totalDays = Math.round(visits * avgTime);
                                return [``, `Total Impact: ${totalDays} days`, `Efficiency: ${visits > 0 ? (visits/avgTime).toFixed(1) : 0} visits/day`];
                            }
                        }
                    }
                },
                interaction: {
                    mode: 'index',
                    intersect: false,
                },
                scales: {
                    x: {
                        title: {
                            display: true,
                            text: 'Quarter',
                            font: {
                                size: 14,
                                weight: '600'
                            }
                        },
                        grid: {
                            display: false
                        },
                        ticks: {
                            font: {
                                size: 12,
                                weight: '500'
                            }
                        }
                    },
                    y: {
                        type: 'linear',
                        display: true,
                        position: 'left',
                        beginAtZero: true,
                        max: 90,
                        title: {
                            display: true,
                            text: 'Number of Visits',
                            color: '#2c3e50',
                            font: {
                                size: 14,
                                weight: '600'
                            }
                        },
                        ticks: {
                            stepSize: 10,
                            color: '#2c3e50',
                            font: {
                                size: 11,
                                weight: '500'
                            }
                        },
                        grid: {
                            color: 'rgba(44, 62, 80, 0.1)',
                            lineWidth: 1
                        }
                    },
                    y1: {
                        type: 'linear',
                        display: true,
                        position: 'right',
                        beginAtZero: true,
                        max: 12,
                        title: {
                            display: true,
                            text: 'Average Time (days)',
                            color: '#e74c3c',
                            font: {
                                size: 14,
                                weight: '600'
                            }
                        },
                        ticks: {
                            stepSize: 2,
                            color: '#e74c3c',
                            font: {
                                size: 11,
                                weight: '500'
                            }
                        },
                        grid: {
                            drawOnChartArea: false,
                            color: 'rgba(231, 76, 60, 0.1)'
                        }
                    }
                }
            }
        });

        // Models Chart (Enhanced Animation)
        const modelsChart = new Chart(document.getElementById('modelsChart'), {
            type: 'doughnut',
            data: {
                labels: ['FMX 440', 'FH 520', '420', 'FL 240'],
                datasets: [{
                    data: [43, 10, 2, 2], // Vehicle count: 43+10+2+2 = 57 vehicles
                    backgroundColor: ['#2c3e50', '#3498db', '#f39c12', '#e74c3c'],
                    borderWidth: 3,
                    borderColor: '#fff',
                    cutout: '55%',
                    hoverOffset: 15
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                animation: {
                    animateRotate: true,
                    animateScale: true,
                    duration: 2000,
                    easing: 'easeInOutBack',
                    delay: (context) => {
                        let delay = 0;
                        if (context.type === 'data' && context.mode === 'default') {
                            delay = context.dataIndex * 300; // Staggered animation
                        }
                        return delay;
                    }
                },
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            padding: 25,
                            usePointStyle: true,
                            pointStyle: 'circle',
                            font: {
                                size: 13,
                                weight: '600'
                            }
                        }
                    },
                    tooltip: {
                        backgroundColor: 'rgba(44, 62, 80, 0.9)',
                        titleColor: '#fff',
                        bodyColor: '#fff',
                        borderColor: '#2c3e50',
                        borderWidth: 2,
                        cornerRadius: 8,
                        callbacks: {
                            title: function(context) {
                                return `Model: ${context[0].label}`;
                            },
                            label: function(context) {
                                const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                const percentage = ((context.parsed / total) * 100).toFixed(1);
                                return `Vehicles: ${context.parsed} (${percentage}%)`;
                            },
                            afterLabel: function(context) {
                                const interventionsData = [237, 63, 3, 2]; // Total interventions per model
                                const avgVisits = (interventionsData[context.dataIndex] / context.parsed).toFixed(1);
                                return [
                                    `Total interventions: ${interventionsData[context.dataIndex]}`,
                                    `Average visits per vehicle: ${avgVisits}`
                                ];
                            }
                        }
                    }
                },
                interaction: {
                    intersect: false,
                    mode: 'point'
                },
                hover: {
                    animationDuration: 300
                }
            }
        });

        // Populate vehicles table
        function populateVehiclesTable() {
            const tbody = document.getElementById('vehiclesTableBody');
            tbody.innerHTML = '';
            
            topVehiclesData.forEach((vehicle, index) => {
                const row = document.createElement('tr');
                
                let statusClass = 'normal';
                let statusText = 'Normal';
                
                if (vehicle.days >= 60) {
                    statusClass = 'critical';
                    statusText = 'Critical';
                } else if (vehicle.days >= 40) {
                    statusClass = 'warning';
                    statusText = 'Attention';
                }
                
                row.innerHTML = `
                    <td><span class="rank">${index + 1}Âº</span></td>
                    <td><strong>${vehicle.plate}</strong></td>
                    <td>${vehicle.model}</td>
                    <td>${vehicle.visits}</td>
                    <td class="${statusClass}">${vehicle.days} days</td>
                    <td>${vehicle.avgDays} days</td>
                    <td><strong>${vehicle.odometer.toLocaleString()} km</strong></td>
                    <td>${vehicle.lastVisit}</td>
                    <td class="${statusClass}">${statusText}</td>
                `;
                
                tbody.appendChild(row);
            });
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            populateVehiclesTable();
        });
    </script>
</body>
</html>
                        <li>
